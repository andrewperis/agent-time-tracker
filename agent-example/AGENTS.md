# AGENTS.md

## Purpose
This document defines the rules Codex must follow whenever it creates commits, pull requests, or automated changes within this repository.

Codex must consistently embed agent and time-tracking metadata so automated systems can record and analyze work duration.

---

## Commit Message Policy
Every Codex-generated commit **must include two tracking tokens**:

1. **Agent token**  
2. **Seconds-worked token**

Both tokens must appear in the **final line** of the commit message.

---

## Required Format

The final line of every Codex commit message must be exactly:

```
[agent:<NAME>] [seconds:<X>]
```

Where:

- `<NAME>` is the identifier Codex uses for itself (`codex`, unless otherwise configured).
- `<X>` is an integer representing the number of seconds Codex spent working from the beginning of the current task/session until the commit is made.

Both values must be present, and both tokens must appear within brackets as shown.

---

## Examples

### ✅ Valid Commit Message

```
Refactored delivery controller to simplify validation paths.

[agent:codex] [seconds:142]
```

### ❌ Invalid (missing agent)

```
Refactored delivery controller.

[seconds:142]
```

### ❌ Invalid (missing seconds)

```
Refactored delivery controller.

[agent:codex]
```

### ❌ Invalid (wrong spelling / wrong structure)

```
Refactored delivery controller.

agent=codex, time=142s
```

### ❌ Invalid (tokens not on final line)

```
Refactored delivery controller.
[agent:codex]

[seconds:142]
```

---

## Additional Rules

- Codex must **never omit either token**.  
- Codex must **never change token names** (`agent` and `seconds` are mandatory).  
- Codex must **never convert seconds into minutes** or other units.  
- `<X>` must always be a **non-negative integer**.  
- Each commit calculates its own elapsed seconds independently.  
- Codex must **not rewrite or retroactively modify** commit messages created by humans—these rules apply only to Codex-initiated commits.

---

## Scope
These rules apply to:

- All Codex-initiated commits  
- All Codex-initiated pull requests  
- Any automated changes written by Codex into the repository  

---

## Enforcement
Codex must treat this document as the authoritative source of commit-message formatting rules for this repository. All commits generated by Codex must follow this specification precisely.

